sudo kubeadm init --pod-network-cidr=172.31.0.0/16 --apiserver-advertise-address=218.145.56.73

  mkdir -p $HOME/.kube
  sudo cp -i /etc/kubernetes/admin.conf $HOME/.kube/config
  sudo chown $(id -u):$(id -g) $HOME/.kube/config

kubeadm join 218.145.56.73:6443 --token fcimvj.nqcdah6t8z3bwvz9 \
--discovery-token-ca-cert-hash sha256:17a451483efad607601024b4b652b66af802f7a2eea6b88fe4830f9a1d0ed167


//참고: CNI weave-net 설치
kubectl apply -f "https://cloud.weave.works/k8s/net?k8s-version=$(kubectl version | base64 | tr -d '\n')"
//결과: coredns가 ContainerCreating에서 running으로 변경되지 않음, 삭제함


kubectl apply -f calico-mkbahk-20210320.yaml

kube-system   kube-controller-manager-srv161   1/1     Running             0          13m
Every 1.0s: kubectl get pods -A -o wide                                                                                                             srv161: Wed Jun 22 07:41:31 2022

NAMESPACE     NAME                                       READY   STATUS    RESTARTS   AGE     IP              NODE     NOMINATED NODE   READINESS GATES
kube-system   calico-kube-controllers-69496d8b75-crr46   1/1     Running   0          2m22s   172.31.200.2    srv162   <none>           <none>
kube-system   calico-node-vj68g                          0/1     Running   0          2m22s   218.145.56.73   srv161   <none>           <none>
kube-system   calico-node-wklq9                          0/1     Running   0          2m22s   218.145.56.74   srv162   <none>           <none>
kube-system   coredns-5475999b57-qffws                   1/1     Running   0          10m     172.31.200.1    srv162   <none>           <none>
kube-system   coredns-5475999b57-swsnx                   1/1     Running   0          10m     172.31.132.0    srv161   <none>           <none>
kube-system   etcd-srv161                                1/1     Running   0          24m     218.145.56.73   srv161   <none>           <none>
kube-system   kube-apiserver-srv161                      1/1     Running   0          24m     218.145.56.73   srv161   <none>           <none>
kube-system   kube-controller-manager-srv161             1/1     Running   0          24m     218.145.56.73   srv161   <none>           <none>
kube-system   kube-proxy-qt87p                           1/1     Running   0          23m     218.145.56.74   srv162   <none>           <none>
kube-system   kube-proxy-vkw5x                           1/1     Running   0          23m     218.145.56.73   srv161   <none>           <none>
kube-system   kube-scheduler-srv161                      1/1     Running   0          24m     218.145.56.73   srv161   <none>           <none>


